{
    "task_id": "gabime__spdlog-1422",
    "setup_info": {
        "repo_path": "testbed/gabime__spdlog-1422_2025-06-30_12-10-16",
        "repo_cache_path": "testbed/gabime/spdlog_cache"
    },
    "task_info": {
        "repo": "gabime/spdlog",
        "pull_number": 1422,
        "instance_id": "gabime__spdlog-1422",
        "issue_numbers": [
            "1247"
        ],
        "base_commit": "4e643fa42c4c502993e79010eff72c5ed3c1319f",
        "patch": "diff --git a/example/CMakeLists.txt b/example/CMakeLists.txt\n--- a/example/CMakeLists.txt\n+++ b/example/CMakeLists.txt\n@@ -4,6 +4,8 @@\n cmake_minimum_required(VERSION 3.1)\n project(spdlog_examples CXX)\n \n+include(../cmake/utils.cmake)\n+\n if(NOT TARGET spdlog)\n     # Stand-alone build\n     find_package(spdlog REQUIRED)\n",
        "test_patch": "diff --git a/tests/CMakeLists.txt b/tests/CMakeLists.txt\n--- a/tests/CMakeLists.txt\n+++ b/tests/CMakeLists.txt\n@@ -1,5 +1,12 @@\n+cmake_minimum_required(VERSION 3.2)\n+\n project(spdlog_utests CXX)\n \n+if(NOT TARGET spdlog)\n+    # Stand-alone build\n+    find_package(spdlog REQUIRED)\n+endif()\n+\n include(../cmake/utils.cmake)\n \n find_package(PkgConfig)\n",
        "problem_statement": "Request: post installation runnable tests\nHello,\r\n\r\nI'm updating the spdlog package for Debian and I'm no longer easily able to run the tests against the installed headers due to the removal of the standalone `tests/Makefile`.\r\n\r\nHere is the current setup\r\n```\r\n# this is after copying the contents of the tests directory from the libspdlog-dev package to the # temporary working directory\r\ncmake -DSPDLOG_BUILD_TESTS=ON -DSPDLOG_BUILD_TESTS_HO=ON .\r\nmake CFLAGS=-DSPDLOG_FMT_EXTERNAL\r\nmake test\r\n```\r\n\r\nAnd the current result\r\n\r\n```\r\n-- The CXX compiler identification is GNU 9.2.1\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"0.29\") \r\n-- Checking for module 'libsystemd'\r\n--   Found libsystemd, version 242\r\nCMake Warning (dev) in CMakeLists.txt:\r\n  No cmake_minimum_required command is present.  A line of code such as\r\n\r\n    cmake_minimum_required(VERSION 3.13)\r\n\r\n  should be added at the top of the file.  The version specified may be lower\r\n  if you wish to support older CMake versions for this project.  For more\r\n  information run \"cmake --help-policy CMP0000\".\r\nThis warning is for project developers.  Use -Wno-dev to suppress it.\r\n\r\n-- Configuring done\r\nCMake Warning (dev) at CMakeLists.txt:58 (add_executable):\r\n  Policy CMP0028 is not set: Double colon in target name means ALIAS or\r\n  IMPORTED target.  Run \"cmake --help-policy CMP0028\" for policy details.\r\n  Use the cmake_policy command to set the policy and suppress this warning.\r\n\r\n  Target \"spdlog-utests-ho\" links to target \"spdlog::spdlog_header_only\" but\r\n  the target was not found.  Perhaps a find_package() call is missing for an\r\n  IMPORTED target, or an ALIAS target is missing?\r\nThis warning is for project developers.  Use -Wno-dev to suppress it.\r\n\r\n-- Generating done\r\n-- Build files have been written to: /tmp/autopkgtest.u6TQBq/autopkgtest_tmp/tests\r\nScanning dependencies of target spdlog-utests\r\n[  2%] Building CXX object CMakeFiles/spdlog-utests.dir/test_file_helper.o\r\nIn file included from /usr/include/spdlog/common.h:38,\r\n                 from /usr/include/spdlog/spdlog.h:12,\r\n                 from /tmp/autopkgtest.u6TQBq/autopkgtest_tmp/tests/includes.h:17,\r\n                 from /tmp/autopkgtest.u6TQBq/autopkgtest_tmp/tests/test_file_helper.cpp:4:\r\n/usr/include/spdlog/fmt/fmt.h:22:10: fatal error: bundled/core.h: No such file or directory\r\n   22 | #include \"bundled/core.h\"\r\n      |          ^~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\n```\r\n\r\n```\r\n\n",
        "hints_text": "Not sure I understand whats going on here,  but you probably need to pass the \u201c-DSPDLOG_FMT_EXTERNAL\u201d to the CMake command as well.\n`SPDLOG_FMT_EXTERNAL` is not an option for `tests/CMakeLists.txt`\r\n\r\n```\r\n$ cmake -DSPDLOG_BUILD_TESTS=ON -DSPDLOG_BUILD_TESTS_HO=ON -DSPDLOG_FMT_EXTERNAL=ON .\r\n-- The CXX compiler identification is GNU 9.2.1\r\n-- Check for working CXX compiler: /usr/bin/c++\r\n-- Check for working CXX compiler: /usr/bin/c++ -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"0.29\") \r\n-- Checking for module 'libsystemd'\r\n--   Found libsystemd, version 242\r\nCMake Warning (dev) in CMakeLists.txt:\r\n  No cmake_minimum_required command is present.  A line of code such as\r\n\r\n    cmake_minimum_required(VERSION 3.13)\r\n\r\n  should be added at the top of the file.  The version specified may be lower\r\n  if you wish to support older CMake versions for this project.  For more\r\n  information run \"cmake --help-policy CMP0000\".\r\nThis warning is for project developers.  Use -Wno-dev to suppress it.\r\n\r\n-- Configuring done\r\nCMake Warning (dev) at CMakeLists.txt:58 (add_executable):\r\n  Policy CMP0028 is not set: Double colon in target name means ALIAS or\r\n  IMPORTED target.  Run \"cmake --help-policy CMP0028\" for policy details.\r\n  Use the cmake_policy command to set the policy and suppress this warning.\r\n\r\n  Target \"spdlog-utests-ho\" links to target \"spdlog::spdlog_header_only\" but\r\n  the target was not found.  Perhaps a find_package() call is missing for an\r\n  IMPORTED target, or an ALIAS target is missing?\r\nThis warning is for project developers.  Use -Wno-dev to suppress it.\r\n\r\n-- Generating done\r\nCMake Warning:\r\n  Manually-specified variables were not used by the project:\r\n\r\n    SPDLOG_FMT_EXTERNAL\r\n\r\n\r\n-- Build files have been written to: /tmp/autopkgtest.uxh3Fa/autopkgtest_tmp/tests\r\n$ make CFLAGS=-DSPDLOG_FMT_EXTERNAL spdlog-utests-ho spdlog-utests\r\nScanning dependencies of target spdlog-utests-ho\r\n[  5%] Building CXX object CMakeFiles/spdlog-utests-ho.dir/test_file_helper.o\r\nIn file included from /usr/include/spdlog/common.h:38,\r\n                 from /usr/include/spdlog/spdlog.h:12,\r\n                 from /tmp/autopkgtest.uxh3Fa/autopkgtest_tmp/tests/includes.h:17,\r\n                 from /tmp/autopkgtest.uxh3Fa/autopkgtest_tmp/tests/test_file_helper.cpp:4:\r\n/usr/include/spdlog/fmt/fmt.h:22:10: fatal error: bundled/core.h: No such file or directory\r\n   22 | #include \"bundled/core.h\"\r\n      |          ^~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\n\r\n```\n> Target \"spdlog-utests-ho\" links to target \"spdlog::spdlog_header_only\" but\r\n  the target was not found.\r\n\r\nPerhaps the has something to do with this? To not setting right define(SPDLOG_FMT_EXTERNAL).\n> Perhaps the has something to do with this? To not setting right define(SPDLOG_FMT_EXTERNAL).\r\n\r\nI'm not clear as to what you are suggesting here\r\n\r\nAlso, can this issue be re-opened?\n@mr-c Where can I download and try the package for Debian ? Seems very old \n@gabime https://packages.debian.org/search?keywords=spdlog has the released packages The latest package is for 1.3.1, the January release\r\n\r\nThe current packaging source is at https://salsa.debian.org/med-team/spdlog",
        "created_at": "2020-02-07T14:41:08Z",
        "version": "1.5"
    }
}